<!DOCTYPE html>
<html class="light" lang="en">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>Add New Profile</title>
  
  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet" />
  <link href="https://fonts.googleapis.com" rel="preconnect"/>
  <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  
  <!-- Configuration -->
  <script id="tailwind-config">
    tailwind.config = {
      darkMode: "class", 
      theme: {
        extend: {
          colors: {
            primary: "#FAC638", 
            "primary-dark": "#e5b020", 
            "background-light": "#FFFCF5", 
            "background-dark": "#231e0f", 
            "text-main": "#4a3b2a", 
            "text-sub": "#8c805f", 
            "card-bg": "#FFFEF9", 
            "input-bg": "#FAF8F1",
            success: "#88c458", 
            danger: "#ff8fa3"
          }, 
          fontFamily: {
            display: "Plus Jakarta Sans"
          }, 
          borderRadius: {
            DEFAULT: "0.5rem", 
            lg: "1rem", 
            xl: "1.5rem", 
            "2xl": "2rem",
            full: "9999px"
          }, 
          boxShadow: {
            soft: "0 8px 30px -4px rgba(250, 198, 56, 0.15)", 
            card: "0 4px 14px rgba(74, 59, 42, 0.03)",
          }
        }
      }
    };
  </script>
  
  <style>
    body { min-height: 100dvh; }
    .no-scrollbar::-webkit-scrollbar { display: none; }
  </style>

  <!-- Components -->
  <script src="components/app-header.js"></script>
  <script src="components/confirm-modal.js"></script>
</head>

<body class="bg-background-light dark:bg-background-dark font-display antialiased text-text-main overflow-x-hidden selection:bg-primary/30">

  <!-- Mobile Container -->
  <div class="relative flex h-full min-h-screen w-full flex-col max-w-md mx-auto bg-background-light dark:bg-background-dark shadow-2xl overflow-hidden border-x border-black/5">
    
    <!-- Header -->
    <app-header type="back" title="ADD CHILDS" back-url="index.html" hide-more></app-header>

    <main class="flex-1 px-8 pb-24 overflow-y-auto no-scrollbar">
      
      <!-- Avatar Creation Section -->
      <div class="flex flex-col items-center mt-4 mb-8">
        <div class="relative group">
          <!-- Hidden File Input -->
          <input type="file" id="avatar-upload" accept="image/*" class="hidden" onchange="handleAvatarUpload(event)">
          
          <!-- Avatar Image (Clickable) -->
          <button onclick="document.getElementById('avatar-upload').click()" class="size-36 rounded-full ring-4 ring-white shadow-soft bg-blue-50 overflow-hidden relative group-hover:ring-primary/50 transition-all cursor-pointer">
            <img id="avatar-preview" src="https://api.dicebear.com/7.x/avataaars/svg?seed=new-child&backgroundColor=b6e3f4" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105">
            
            <!-- Camera Overlay -->
            <div class="absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity backdrop-blur-[1px]">
              <span class="material-symbols-rounded text-white text-3xl drop-shadow-md">photo_camera</span>
            </div>
          </button>
          
          <!-- Shuffle Button -->
          <button onclick="shuffleAvatar()" class="absolute -bottom-1 -right-1 size-11 bg-white text-text-main rounded-xl shadow-card flex items-center justify-center hover:scale-105 active:scale-95 transition-all ring-1 ring-black/5 z-10" title="Randomize">
            <span class="material-symbols-rounded text-xl text-primary animate-[spin_3s_linear_infinite_paused] hover:animate-[spin_1s_ease-out]">refresh</span>
          </button>
        </div>
        <p class="mt-3 text-xs font-bold text-text-sub/50 uppercase tracking-wider">Tap photo to upload</p>
      </div>

      <!-- Form Section -->
      <form class="flex flex-col gap-5">
        
        <!-- Name Input -->
        <div class="flex flex-col gap-2">
          <label for="name" class="px-2 text-xs font-bold text-text-sub uppercase tracking-wide">Child's Name</label>
          <div class="bg-card-bg p-2 rounded-2xl ring-1 ring-black/5 focus-within:ring-2 focus-within:ring-primary/50 transition-all shadow-card flex items-center gap-3">
             <div class="size-10 rounded-xl bg-input-bg flex items-center justify-center text-text-sub">
                <span class="material-symbols-rounded text-xl">person</span>
             </div>
             <input type="text" id="name" placeholder="e.g. Leo" class="flex-1 bg-transparent border-none p-0 text-lg font-bold text-text-main placeholder-text-sub/30 focus:ring-0" required>
          </div>
        </div>

        <!-- Gender Selection -->
        <div class="flex flex-col gap-2">
          <label class="px-2 text-xs font-bold text-text-sub uppercase tracking-wide">Gender</label>
          <div class="grid grid-cols-2 gap-3">
            <!-- Boy Option -->
            <label class="cursor-pointer">
              <input type="radio" name="gender" value="boy" class="peer hidden" checked>
              <div class="bg-card-bg p-3 rounded-2xl ring-1 ring-black/5 shadow-card peer-checked:bg-blue-50 peer-checked:ring-blue-400 peer-checked:text-blue-600 flex items-center justify-center gap-2 transition-all h-14">
                <span class="material-symbols-rounded text-xl text-blue-400 peer-checked:text-blue-600">male</span>
                <span class="font-bold text-text-sub peer-checked:text-blue-700">Boy</span>
              </div>
            </label>
            
            <!-- Girl Option -->
            <label class="cursor-pointer">
              <input type="radio" name="gender" value="girl" class="peer hidden">
              <div class="bg-card-bg p-3 rounded-2xl ring-1 ring-black/5 shadow-card peer-checked:bg-pink-50 peer-checked:ring-pink-400 peer-checked:text-pink-600 flex items-center justify-center gap-2 transition-all h-14">
                <span class="material-symbols-rounded text-xl text-pink-400 peer-checked:text-pink-600">female</span>
                <span class="font-bold text-text-sub peer-checked:text-pink-700">Girl</span>
              </div>
            </label>
          </div>
        </div>

        <!-- Birthday Input (Optional) -->
        <div class="flex flex-col gap-2">
          <label for="birthday" class="px-2 text-xs font-bold text-text-sub uppercase tracking-wide">Birthday <span class="text-text-sub/40 normal-case tracking-normal">(Optional)</span></label>
          <div class="bg-card-bg p-2 rounded-2xl ring-1 ring-black/5 focus-within:ring-2 focus-within:ring-primary/50 transition-all shadow-card flex items-center gap-3">
             <div class="size-10 rounded-xl bg-input-bg flex items-center justify-center text-text-sub">
                <span class="material-symbols-rounded text-xl">cake</span>
             </div>
             <input type="date" id="birthday" class="flex-1 bg-transparent border-none p-0 text-lg font-bold text-text-main focus:ring-0 text-opacity-80">
          </div>
        </div>

      </form>
    </main>

    <!-- Bottom Action -->
    <div class="absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-background-light via-background-light to-transparent pt-12">
        <button onclick="document.querySelector('app-confirm-modal').show({ title: 'Create Profile?', message: 'Add a new profile for this child?', confirmText: 'Create', onConfirm: () => window.location.href='index.html' })" class="w-full bg-primary hover:bg-primary-dark text-white font-bold text-lg py-4 rounded-2xl shadow-soft flex items-center justify-center gap-2 transition-transform active:scale-95 ring-1 ring-black/5">
            <span class="material-symbols-rounded text-2xl">check</span>
            Create Profile
        </button>
    </div>

    <app-confirm-modal></app-confirm-modal>

  </div>

  <script>
    // Handle File Upload
    function handleAvatarUpload(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          document.getElementById('avatar-preview').src = e.target.result;
        };
        reader.readAsDataURL(file);
      }
    }

    // Simple Avatar Randomizer
    function shuffleAvatar() {
      const seeds = ['Felix', 'Aneka', 'Zoe', 'Jack', 'Sam', 'Milo', 'Bella', 'Leo', 'Lily'];
      const bgColors = ['b6e3f4', 'ffdfbf', 'c0aede', 'd1d4f9', 'ffd5dc'];
      
      const randomSeed = seeds[Math.floor(Math.random() * seeds.length)] + Math.random().toString(36).substring(7);
      const randomColor = bgColors[Math.floor(Math.random() * bgColors.length)];
      
      const img = document.getElementById('avatar-preview');
      img.style.opacity = '0.5';
      img.style.transform = 'scale(0.9) rotate(-10deg)';
      
      setTimeout(() => {
        img.src = `https://api.dicebear.com/7.x/avataaars/svg?seed=${randomSeed}&backgroundColor=${randomColor}`;
        img.onload = () => {
          img.style.opacity = '1';
          img.style.transform = 'scale(1) rotate(0deg)';
        };
      }, 200);
    }
  </script>
</body>
</html>