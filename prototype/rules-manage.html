<!DOCTYPE html>
<html class="light" lang="en">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>Manage Rules</title>
  
  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet" />
  <link href="https://fonts.googleapis.com" rel="preconnect"/>
  <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  
  <!-- Configuration -->
  <script id="tailwind-config">
    tailwind.config = {
      darkMode: "class", 
      theme: {
        extend: {
          colors: {
            primary: "#FAC638", 
            "primary-dark": "#e5b020", 
            "background-light": "#FFFCF5", 
            "background-dark": "#231e0f", 
            "text-main": "#4a3b2a", 
            "text-sub": "#8c805f", 
            "card-bg": "#FFFEF9", 
            "card-warm": "#FFFCF5", 
            success: "#88c458", 
            danger: "#ff8fa3"
          }, 
          fontFamily: {
            display: "Plus Jakarta Sans"
          }, 
          borderRadius: {
            DEFAULT: "0.5rem", 
            lg: "1rem", 
            xl: "1.5rem", 
            "2xl": "2rem",
            full: "9999px"
          }, 
          boxShadow: {
            soft: "0 8px 30px -4px rgba(250, 198, 56, 0.15)", 
            card: "0 4px 14px rgba(74, 59, 42, 0.03)",
          }
        }
      }
    };
  </script>
  
  <style>
    html, body { height: 100%; overflow: hidden; }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .mode-active { transform: scale(1.02); box-shadow: 0 4px 12px rgba(0,0,0,0.05); font-weight: 800; }
    
    /* Toggle Switch */
    .toggle-checkbox:checked { right: 0; border-color: #FAC638; }
    .toggle-checkbox:checked + .toggle-label { background-color: #FAC638; }
  </style>

  <!-- Components -->
  <script src="components/translations.js"></script>
  <script src="components/i18n.js"></script>
  <script src="components/app-header.js"></script>
  <script src="components/fab-button.js"></script>
</head>

<body class="bg-background-light dark:bg-background-dark font-display antialiased text-text-main overflow-x-hidden selection:bg-primary/30">

  <!-- Mobile Container -->
  <div class="relative flex h-full min-h-screen w-full flex-col max-w-md mx-auto bg-background-light dark:bg-background-dark shadow-2xl overflow-hidden border-x border-black/5">
    
    <!-- Header -->
    <app-header type="back" title="Custom Rules" data-i18n-title="rules.title" back-url="child-manage.html" hide-more></app-header>

    <main class="flex-1 px-6 pb-24 overflow-y-auto no-scrollbar">
      
      <!-- Mode Switcher -->
      <div class="mt-4 mb-6 bg-[#F2EFE5] p-1.5 rounded-2xl ring-1 ring-black/5 flex sticky top-0 z-20 backdrop-blur-md bg-opacity-90">
        <button onclick="switchMode('reward')" id="btn-reward" class="mode-active flex-1 py-3 rounded-xl bg-white text-success shadow-sm text-sm transition-all flex items-center justify-center gap-2">
           <span class="material-symbols-rounded">add_circle</span> <span data-i18n="record.reward">Reward</span>
        </button>
        <button onclick="switchMode('punish')" id="btn-punish" class="flex-1 py-3 rounded-xl text-text-sub/60 hover:text-text-main text-sm font-bold transition-all flex items-center justify-center gap-2">
           <span class="material-symbols-rounded">remove_circle</span> <span data-i18n="record.punish">Punish</span>
        </button>
      </div>

      <!-- Rules List -->
      <div id="list-reward" class="space-y-3 animate-fade-in">
         <!-- Rule Item 1 -->
         <div onclick="window.location.href='edit-rule.html'" class="bg-card-bg p-4 rounded-2xl shadow-card ring-1 ring-black/5 flex items-center gap-4 cursor-pointer hover:ring-primary/20 transition-all">
            <div class="size-12 rounded-xl bg-blue-50 text-blue-500 flex items-center justify-center shrink-0 shadow-sm">
               <span class="material-symbols-rounded text-2xl">menu_book</span>
            </div>
            <div class="flex-1">
               <h4 class="font-bold text-text-main text-sm">Homework</h4>
               <span class="text-xs font-extrabold text-success bg-green-50 px-2 py-0.5 rounded-md mt-1 inline-block">+15</span>
            </div>
            
            <!-- Actions -->
            <div class="flex items-center gap-3">
               <button onclick="confirmDelete(event, 'Homework')" class="size-10 rounded-xl bg-input-bg text-text-sub/40 hover:text-red-400 hover:bg-red-50 transition-all flex items-center justify-center ring-1 ring-black/[0.03] active:scale-95">
                  <span class="material-symbols-rounded text-xl">delete</span>
               </button>
               <div onclick="event.stopPropagation()" class="relative inline-block w-10 align-middle select-none">
                   <input type="checkbox" name="toggle" id="toggle1" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer transition-all duration-300 left-0 checked:left-5 top-0.5 shadow-sm" checked/>
                   <label for="toggle1" class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-200 cursor-pointer transition-colors duration-300 checked:bg-success"></label>
               </div>
            </div>
         </div>

         <!-- Rule Item 2 -->
         <div onclick="window.location.href='edit-rule.html'" class="bg-card-bg p-4 rounded-2xl shadow-card ring-1 ring-black/5 flex items-center gap-4 cursor-pointer hover:ring-primary/20 transition-all">
            <div class="size-12 rounded-xl bg-green-50 text-green-500 flex items-center justify-center shrink-0 shadow-sm">
               <span class="material-symbols-rounded text-2xl">cleaning_services</span>
            </div>
            <div class="flex-1">
               <h4 class="font-bold text-text-main text-sm">Tidy Room</h4>
               <span class="text-xs font-extrabold text-success bg-green-50 px-2 py-0.5 rounded-md mt-1 inline-block">+10</span>
            </div>
            
            <div class="flex items-center gap-3">
               <button onclick="confirmDelete(event, 'Tidy Room')" class="size-10 rounded-full bg-gray-100 text-gray-400 hover:text-red-500 hover:bg-red-100 transition-all flex items-center justify-center shadow-sm active:scale-95">
                  <span class="material-symbols-rounded text-xl">delete</span>
               </button>
               <div onclick="event.stopPropagation()" class="relative inline-block w-10 align-middle select-none">
                   <input type="checkbox" name="toggle" id="toggle2" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer transition-all duration-300 left-0 checked:left-5 top-0.5 shadow-sm" checked/>
                   <label for="toggle2" class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-200 cursor-pointer transition-colors duration-300 checked:bg-success"></label>
               </div>
            </div>
         </div>
      </div>

      <div id="list-punish" class="space-y-3 hidden">
         <!-- Punish Item 1 -->
         <div onclick="window.location.href='edit-rule.html'" class="bg-card-bg p-4 rounded-2xl shadow-card ring-1 ring-black/5 flex items-center gap-4 cursor-pointer hover:ring-primary/20 transition-all">
            <div class="size-12 rounded-xl bg-red-50 text-red-500 flex items-center justify-center shrink-0 shadow-sm">
               <span class="material-symbols-rounded text-2xl">sentiment_dissatisfied</span>
            </div>
            <div class="flex-1">
               <h4 class="font-bold text-text-main text-sm">Fighting</h4>
               <span class="text-xs font-extrabold text-danger bg-red-50 px-2 py-0.5 rounded-md mt-1 inline-block">-20</span>
            </div>
            
            <div class="flex items-center gap-3">
               <button onclick="confirmDelete(event, 'Fighting')" class="size-10 rounded-full bg-gray-100 text-gray-400 hover:text-red-500 hover:bg-red-100 transition-all flex items-center justify-center shadow-sm active:scale-95">
                  <span class="material-symbols-rounded text-xl">delete</span>
               </button>
               <div onclick="event.stopPropagation()" class="relative inline-block w-10 align-middle select-none transition duration-200 ease-in">
                   <input type="checkbox" name="toggle" id="toggle3" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer transition-all duration-300 left-0 checked:left-5 top-0.5 shadow-sm" checked/>
                   <label for="toggle3" class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-200 cursor-pointer transition-colors duration-300 checked:bg-red-400"></label>
               </div>
            </div>
         </div>
      </div>

    </main>

    <!-- Delete Confirm Dialog -->
    <div id="delete-modal" class="fixed inset-0 bg-black/40 backdrop-blur-sm z-[100] flex items-center justify-center p-6 opacity-0 pointer-events-none transition-opacity duration-300">
       <div class="bg-background-light rounded-3xl p-6 shadow-2xl max-w-xs w-full text-center border border-primary/10">
          <div class="size-16 rounded-2xl bg-red-50 text-red-500 flex items-center justify-center mx-auto mb-4">
             <span class="material-symbols-rounded text-3xl">delete_forever</span>
          </div>
          <h3 class="text-lg font-extrabold text-text-main mb-2">Delete Rule?</h3>
          <p class="text-sm text-text-sub font-medium mb-6">Are you sure you want to delete "<span id="delete-rule-name"></span>"? This action cannot be undone.</p>
          <div class="flex flex-col gap-3">
             <button onclick="closeDeleteModal()" class="w-full py-3 bg-red-500 text-white font-bold rounded-xl shadow-sm hover:bg-red-600 transition-colors">Yes, Delete</button>
             <button onclick="closeDeleteModal()" class="w-full py-3 bg-white text-text-sub font-bold rounded-xl ring-1 ring-black/5">Cancel</button>
          </div>
       </div>
    </div>

    <!-- FAB -->
    <app-fab icon="add" href="add-rule.html"></app-fab>

  </div>

  <script>
    function switchMode(mode) {
      const btnReward = document.getElementById('btn-reward');
      const btnPunish = document.getElementById('btn-punish');
      const listReward = document.getElementById('list-reward');
      const listPunish = document.getElementById('list-punish');

      if (mode === 'reward') {
        btnReward.classList.add('mode-active', 'bg-white', 'text-success', 'shadow-sm');
        btnReward.classList.remove('text-text-sub/60');
        btnPunish.classList.remove('mode-active', 'bg-white', 'text-danger', 'shadow-sm');
        btnPunish.classList.add('text-text-sub/60');
        listReward.classList.remove('hidden');
        listPunish.classList.add('hidden');
      } else {
        btnPunish.classList.add('mode-active', 'bg-white', 'text-danger', 'shadow-sm');
        btnPunish.classList.remove('text-text-sub/60');
        btnReward.classList.remove('mode-active', 'bg-white', 'text-success', 'shadow-sm');
        btnReward.classList.add('text-text-sub/60');
        listPunish.classList.remove('hidden');
        listReward.classList.add('hidden');
      }
    }

    function confirmDelete(e, name) {
      e.stopPropagation(); // Prevent card navigation
      document.getElementById('delete-rule-name').textContent = name;
      const modal = document.getElementById('delete-modal');
      modal.classList.remove('opacity-0', 'pointer-events-none');
    }

    function closeDeleteModal() {
      const modal = document.getElementById('delete-modal');
      modal.classList.add('opacity-0', 'pointer-events-none');
    }
  </script>
</body>
</html>