# æˆè¯­æ¥é¾™åŠŸèƒ½æŠ€æœ¯æ–¹æ¡ˆ

> åˆ›å»ºæ—¥æœŸ: 2025-12-23
> æ›´æ–°æ—¥æœŸ: 2025-12-23
> çŠ¶æ€: å¼€å‘ä¸­ (ä¸šåŠ¡é€»è¾‘å·²å®Œæˆï¼ŒUIå¾…å®ç°)

## ä¸€ã€åŠŸèƒ½æ¦‚è¿°

åœ¨ APP ä¸­æ–°å¢æˆè¯­æ¥é¾™æ¸¸æˆåŠŸèƒ½ï¼Œé›†æˆç¦»çº¿è¯­éŸ³è¯†åˆ«ã€åŠ¨æ€éš¾åº¦é…ç½®ã€æç¤ºç³»ç»ŸåŠæ·±åº¦å­¦ä¹ åŠŸèƒ½ã€‚

### æ ¸å¿ƒç‰¹æ€§

- **ç¦»çº¿è¯­éŸ³è¯†åˆ«**ï¼šåŸºäº Vosk å®ç°å®Œå…¨ç¦»çº¿è¯†åˆ«ã€‚
- **12 ä¸ªç­‰çº§æŒ‘æˆ˜**ï¼šä»ä¸€å¹´çº§è‡³åäºŒå¹´çº§ï¼Œéš¾åº¦æ›²çº¿å¹³æ»‘é€’å¢ã€‚
- **è‡ªå®šä¹‰é…ç½®**ï¼šç”¨æˆ·å¯è°ƒæ•´â€œå€’è®¡æ—¶æ—¶é—´â€ä¸â€œå…è´¹æç¤ºæ¬¡æ•°â€ã€‚
- **æƒ…ç»ªä»·å€¼äº¤äº’**ï¼šæ‹ŸäººåŒ– AI äº’åŠ¨ï¼Œä¸°å¯Œçš„æ­£å‘åé¦ˆä¸è¿å‡»ç‰¹æ•ˆã€‚
- **æ•™è‚²æ·±åº¦**ï¼šæ”¯æŒæŸ¥çœ‹æ‹¼éŸ³ã€æœ—è¯»ï¼ˆTTSï¼‰ã€è¯¦ç»†é‡Šä¹‰åŠæ¥æºã€‚
- **èµ„æºæŒ‰éœ€ä¸‹è½½**ï¼šæ¨¡å‹ä¸è¯åº“ä¸å†…ç½®ï¼Œé¦–æ¬¡ä½¿ç”¨æ—¶ä¸‹è½½ã€‚

---

## äºŒã€é…ç½®ä¸éš¾åº¦åˆ†çº§ (Grade System)

ç³»ç»Ÿå°†æˆè¯­åº“ä¸æ¸¸æˆè§„åˆ™æŒ‰ **1-12 å¹´çº§** åˆ’åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š

| é˜¶æ®µ | é€‚ç”¨å¹´çº§ | é»˜è®¤åŒ¹é…è§„åˆ™ | é»˜è®¤å€’è®¡æ—¶ | å…è´¹æç¤º | å¥–åŠ±å€ç‡ |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **åŸºç¡€ (Foundation)** | 1-3 å¹´çº§ | åŒéŸ³ä¸åŒå­— | 30s | 3æ¬¡ | 1.0x |
| **è¿›é˜¶ (Intermediate)** | 4-8 å¹´çº§ | åŒå­—åŒ¹é… | 15s | 1æ¬¡ | 1.8x |
| **ä¸“å®¶ (Advanced)** | 9-12 å¹´çº§ | åŒå­—åŒ¹é… | 8s | 0æ¬¡ | 3.0x |

---

## ä¸‰ã€UI ç•Œé¢è®¾è®¡æ–¹æ¡ˆ (UI/UX Design)

### 1. æ•´ä½“è§†è§‰é£æ ¼ (Style Consistency)
- **è‰²å½©ç­–ç•¥**ï¼šä¿æŒ App ç»Ÿä¸€çš„ **Warm Orange** ä¸»è‰²è°ƒï¼Œé€šè¿‡**èƒŒæ™¯çº¹ç†**åŒºåˆ†å¹´çº§ï¼Œè€Œéæ”¹å˜ä¸»è‰²ã€‚
    - **1-3 å¹´çº§**ï¼šèƒŒæ™¯å¢åŠ å¡é€šäº‘æœµã€æ°”çƒç­‰åœ†æ¶¦å›¾æ¡ˆã€‚
    - **4-8 å¹´çº§**ï¼šèƒŒæ™¯å¢åŠ ä¹¦æœ¬ã€ç¬”å¢¨ç­‰å‡ ä½•å›¾æ¡ˆã€‚
    - **9-12 å¹´çº§**ï¼šèƒŒæ™¯å¢åŠ æ˜Ÿç©ºã€å¥–æ¯ç­‰æç®€çº¿æ¡å›¾æ¡ˆã€‚
- **ç»„ä»¶è§„èŒƒ**ï¼šå»¶ç»­ç°æœ‰çš„ `Container` + `BoxShadow` å¡ç‰‡é£æ ¼ï¼Œåœ†è§’ç»Ÿä¸€ä¸º 24pxã€‚

### 2. æ ¸å¿ƒé¡µé¢ä¸äº¤äº’

#### A. ç­‰çº§é€‰æ‹©å¤§å… (Grade Map)
- **å¸ƒå±€**ï¼šå‚ç›´æ»šåŠ¨çš„â€œé—¯å…³åœ°å›¾â€ã€‚
- **çŠ¶æ€å±•ç¤º**ï¼š
  - **å·²è§£é”**ï¼šäº®è‰²å¡ç‰‡ï¼Œæ˜¾ç¤ºæœ€é«˜æ˜Ÿçº§ï¼ˆâ­ï¸â­ï¸â­ï¸ï¼‰ã€‚
  - **å½“å‰**ï¼šå¸¦æœ‰**è„‰å†²å…‰æ™• (Pulsing Glow)** æ•ˆæœã€‚
  - **æœªè§£é”**ï¼šåŠé€æ˜ç°è‰²ï¼Œå¸¦æœ‰é”å¤´å›¾æ ‡ã€‚

#### B. æ¸¸æˆç«æŠ€åœº (Game Arena)
- **æƒ…æ„ŸåŒ– AI**ï¼šé¡¶éƒ¨å±•ç¤º AI è™šæ‹Ÿå½¢è±¡ï¼ˆå¦‚â€œæˆè¯­çŒ«â€ï¼‰ã€‚
  - **æ€è€ƒæ—¶**ï¼šæ˜¾ç¤º ğŸ¤” è¡¨æƒ…ã€‚
  - **è¢«éš¾ä½æ—¶**ï¼šæ˜¾ç¤º ğŸ˜“ è¡¨æƒ…ã€‚
  - **ç©å®¶ç²¾å½©æ“ä½œ**ï¼šæ˜¾ç¤º ğŸ¤© è¡¨æƒ…å¹¶å¼¹å‡ºæ°”æ³¡â€œå¤ªæ£’äº†ï¼â€ã€‚
- **æ¥é¾™é“¾**ï¼šæ°”æ³¡æµå¸ƒå±€ã€‚**è‡ªåŠ¨é«˜äº®å°¾å­—**ï¼Œé™ä½è®¤çŸ¥è´Ÿè·ã€‚
- **æç®€ FAB äº¤äº’**ï¼š
  - **ç©ºé—²**ï¼šé™æ€éº¦å…‹é£å›¾æ ‡ã€‚
  - **ç›‘å¬ä¸­**ï¼šå›¾æ ‡**å‘¼å¸å¾‹åŠ¨**ï¼Œå¤–åœˆæ˜¾ç¤ºç¯å½¢å€’è®¡æ—¶è¿›åº¦ï¼ˆç»¿->çº¢ï¼‰ã€‚
  - **å¤„ç†ä¸­**ï¼šè½»å¾®è½¬åœˆ Loadingã€‚
- **æ— æ‰“æ–­æç¤º**ï¼š
  - è‹¥æœ‰å…è´¹æ¬¡æ•°ï¼Œç‚¹å‡»ç›´æ¥å‡ºè¯ã€‚
  - è‹¥éœ€æ¶ˆè€—æ˜Ÿæ˜Ÿï¼ŒæŒ‰é’®ä¸Šæ˜¾ç¤ºâ€œ-2â­â€ï¼Œç‚¹å‡»å³æ‰£è´¹å¹¶é£˜å‡ºæ‰£è´¹åŠ¨ç”»ï¼Œ**ä¸å¼¹çª—ç¡®è®¤**ã€‚

#### C. æ­£å‘åé¦ˆæœºåˆ¶ (Emotional Feedback)
- **è¿å‡»ç‰¹æ•ˆ (Combo)**ï¼šè¿ç»­å¿«é€Ÿæ¥é¾™ 3 æ¬¡ï¼Œå±å¹•è¾¹ç¼˜è§¦å‘å½©å¸¦/ç«ç„°ç‰¹æ•ˆï¼Œå¹¶å¼¹å‡ºâ€œæ€ç»´å¦‚ç”µï¼â€è‰ºæœ¯å­—ã€‚
- **å³æ—¶éŸ³æ•ˆ**ï¼šæ¥å¯¹æ—¶æ’­æ”¾æ¸…è„†çš„â€œDingâ€å£°ï¼Œæ¥é”™æ—¶æ’­æ”¾æŸ”å’Œçš„â€œOopsâ€å£°ï¼ˆéåˆºè€³å™ªéŸ³ï¼‰ã€‚
- **å¤±è´¥å…³æ€€**ï¼šå¤±è´¥æ—¶ä¸åªæ˜¾ç¤ºç­”æ¡ˆï¼Œè€Œæ˜¯ç”± AI è¯´ï¼šâ€œè¿™ä¸ªè¯ç¡®å®å¾ˆéš¾ï¼Œä¸è¿‡ **[ç­”æ¡ˆ]** å¯ä»¥æ¥ä¸Šå“¦ï¼Œæˆ‘ä»¬å†è¯•ä¸€æ¬¡ï¼Ÿâ€

#### D. å­¦ä¹ ä¸è¯¦æƒ…
- **æ¸¸æˆè¿›è¡Œä¸­**ï¼šç‚¹å‡»æˆè¯­ä»…å¼¹å‡º**è½»é‡æ°”æ³¡ (Tooltip)** æ˜¾ç¤ºç®€ç•¥é‡Šä¹‰ï¼Œä¸æ‰“æ–­æ¸¸æˆæµã€‚
- **ç»“ç®—/è¯¦æƒ…é¡µ**ï¼šæä¾›å®Œæ•´çš„ `BottomSheet`ï¼ŒåŒ…å«å¤§å­—æ‹¼éŸ³ã€TTS æœ—è¯»æŒ‰é’®ã€å®Œæ•´é‡Šä¹‰ä¸å‡ºå¤„ã€‚

---

## å››ã€æ•°æ®åº“è®¾è®¡ (Drift) - å¢å¼ºç‰ˆ

### 1. æ¸¸æˆé…ç½®è¡¨ (Settings)
```dart
class IdiomGameSettings extends Table {
  IntColumn get id => integer().autoIncrement()();
  IntColumn get childId => integer().references(Childrens, #id)(); 
  IntColumn get currentGrade => integer().withDefault(const Constant(1))(); // 1-12 å¹´çº§
  IntColumn get customCountdown => integer().nullable()();                  // ç”¨æˆ·è‡ªå®šä¹‰æ—¶é—´
  IntColumn get customFreeHints => integer().nullable()();                 // ç”¨æˆ·è‡ªå®šä¹‰æç¤º
  BoolColumn get useHomophone => boolean().withDefault(const Constant(false))();
}
```

### 2. æˆè¯­è¡¨ (Idioms)
```dart
@TableIndex(name: 'idx_idioms_first_pinyin', columns: {#firstPinyinNoTone})
@TableIndex(name: 'idx_idioms_last_pinyin', columns: {#lastPinyinNoTone})
@TableIndex(name: 'idx_idioms_common', columns: {#isCommon})
class Idioms extends Table {
  IntColumn get id => integer().autoIncrement()();
  TextColumn get word => text().withLength(min: 4, max: 8)();
  TextColumn get pinyin => text()();
  
  // å¤šéŸ³å­—æ”¯æŒï¼šé€—å·åˆ†éš”ï¼Œå¦‚ "chong,zhong"
  TextColumn get firstPinyinNoTone => text().withLength(max: 20)();    
  TextColumn get lastPinyinNoTone => text().withLength(max: 20)();     
  
  TextColumn get firstChar => text().withLength(max: 2)();
  TextColumn get lastChar => text().withLength(max: 2)();
  TextColumn get explanation => text().nullable()();
  TextColumn get source => text().nullable()();
  BoolColumn get isCommon => boolean().withDefault(const Constant(true))(); 
  
  IntColumn get gradeLevel => integer().withDefault(const Constant(1))(); // 1-12
  IntColumn get frequency => integer().withDefault(const Constant(1))();  // è¯é¢‘

  @override
  List<Set<Column>> get uniqueKeys => [{word}];
}
```

---

## äº”ã€å¼€å‘é˜¶æ®µåˆ’åˆ†

| é˜¶æ®µ | é‡ç‚¹ä»»åŠ¡ |
| :--- | :--- |
| **Phase 1** | æ•°æ®åº“è¡¨ç»“æ„å‡çº§ä¸ 12 å¹´çº§è¯åº“å¯¼å…¥ |
| **Phase 2** | Vosk è¯­éŸ³è¯†åˆ«é›†æˆä¸ VAD è‡ªåŠ¨æˆªæ–­ |
| **Phase 3** | **UI ç«æŠ€åœºå¼€å‘**ï¼ˆAI è¡¨æƒ…ã€FAB äº¤äº’ã€è¿å‡»ç‰¹æ•ˆï¼‰ |
| **Phase 4** | **ç­‰çº§åœ°å›¾å¼€å‘**ï¼ˆé—¯å…³æ¨¡å¼é€»è¾‘ï¼‰ |
| **Phase 5** | æç¤ºç³»ç»Ÿï¼ˆæ— æ‰“æ–­æ‰£è´¹ï¼‰ä¸æ˜Ÿæ˜Ÿè”åŠ¨ |
| **Phase 6** | ç»“ç®—é¡µã€å­¦ä¹ é¢æ¿ä¸ TTS æœ—è¯» |
| **Phase 7** | æ•´ä½“è”è°ƒä¸æƒ…ç»ªä»·å€¼ç»†èŠ‚æ‰“ç£¨ |

---

## å…­ã€è¯¦ç»†å¼€å‘ä»»åŠ¡æ¸…å•

### Phase 1: æ•°æ®åº“ä¸æ•°æ®å¯¼å…¥ âœ… å·²å®Œæˆ

#### 1.1 èµ„æºä¸‹è½½ç®¡ç†æ¨¡å—
- [x] **P1-1.1.1** åˆ›å»º `ResourceDownloadService` æœåŠ¡ç±»
  - æ–‡ä»¶: `lib/features/idiom_game/services/resource_download_service.dart`
  - åŠŸèƒ½: ç®¡ç† Vosk æ¨¡å‹å’Œæˆè¯­æ•°æ®åº“çš„ä¸‹è½½
  - ä¾èµ–: `http` (HTTPä¸‹è½½), `path_provider` (æœ¬åœ°å­˜å‚¨è·¯å¾„)
- [x] **P1-1.1.2** å®ç°ä¸‹è½½è¿›åº¦å›è°ƒä¸æ–­ç‚¹ç»­ä¼ 
  - ä½¿ç”¨ `http` çš„æµå¼ä¸‹è½½
  - æ”¯æŒè¿›åº¦å›è°ƒ
- [x] **P1-1.1.3** å®ç° MD5 æ ¡éªŒé€»è¾‘
  - ä¸‹è½½å®Œæˆåæ ¡éªŒæ–‡ä»¶å®Œæ•´æ€§
  - æ ¡éªŒå¤±è´¥è‡ªåŠ¨é‡æ–°ä¸‹è½½
- [x] **P1-1.1.4** åˆ›å»ºèµ„æºçŠ¶æ€æ£€æŸ¥æ–¹æ³•
  - `isModelReady()`: æ£€æŸ¥ Vosk æ¨¡å‹æ˜¯å¦å·²ä¸‹è½½
  - `isIdiomDbReady()`: æ£€æŸ¥æˆè¯­æ•°æ®åº“æ˜¯å¦å·²å¯¼å…¥
  - `getResourceStatus()`: è·å–æ‰€æœ‰èµ„æºçŠ¶æ€

#### 1.2 æ•°æ®åº“è¡¨ç»“æ„
- [x] **P1-1.2.1** åˆ›å»º `IdiomGameSettings` è¡¨å®šä¹‰
  - æ–‡ä»¶: `lib/core/database/tables.dart`
  - å­—æ®µ: childId, currentGrade, customCountdown, customFreeHints, useHomophone
- [x] **P1-1.2.2** åˆ›å»º `Idioms` è¡¨å®šä¹‰
  - æ–‡ä»¶: `lib/core/database/tables.dart`
  - å­—æ®µ: word, pinyin, firstPinyinNoTone, lastPinyinNoTone, firstChar, lastChar, explanation, source, gradeLevel, frequency
  - ç´¢å¼•: idx_idioms_first_pinyin, idx_idioms_last_pinyin, idx_idioms_first_char, idx_idioms_last_char, idx_idioms_grade
- [x] **P1-1.2.3** åˆ›å»º `IdiomGameRecords` è¡¨å®šä¹‰
  - æ–‡ä»¶: `lib/core/database/tables.dart`
  - å­—æ®µ: childId, grade, score, chainLength, playedAt, duration, hintsUsed, comboMax, starsEarned, starRating
- [x] **P1-1.2.4** åˆ›å»º `IdiomGradeProgress` è¡¨å®šä¹‰
  - æ–‡ä»¶: `lib/core/database/tables.dart`
  - å­—æ®µ: childId, grade, highScore, bestChainLength, starRating, playCount, isUnlocked
- [x] **P1-1.2.5** æ›´æ–° `AppDatabase` æ³¨å†Œæ–°è¡¨
  - æ–‡ä»¶: `lib/core/database/app_database.dart`
  - æ·»åŠ è¡¨å¼•ç”¨å’Œè¿ç§»è„šæœ¬ (schemaVersion: 3)
- [x] **P1-1.2.6** è¿è¡Œ `build_runner` ç”Ÿæˆæ•°æ®åº“ä»£ç 
  - å‘½ä»¤: `flutter pub run build_runner build`

#### 1.3 æ•°æ®å¯¼å…¥æ¨¡å—
- [x] **P1-1.3.1** åˆ›å»º `IdiomDataImporter` ç±»
  - æ–‡ä»¶: `lib/features/idiom_game/services/idiom_data_importer.dart`
  - åŠŸèƒ½: è§£æ JSON å¹¶æ‰¹é‡æ’å…¥æ•°æ®åº“
- [x] **P1-1.3.2** å®ç° Isolate å¼‚æ­¥å¯¼å…¥
  - ä½¿ç”¨ `compute()` åœ¨åå°çº¿ç¨‹è§£æ JSON
  - é¿å…é˜»å¡ UI çº¿ç¨‹
- [x] **P1-1.3.3** å®ç°å¯¼å…¥è¿›åº¦å›è°ƒ
  - è¿”å›å·²å¯¼å…¥æ¡æ•°/æ€»æ¡æ•°
  - æ”¯æŒ UI æ˜¾ç¤ºè¿›åº¦æ¡
- [x] **P1-1.3.4** å®ç°å¢é‡æ›´æ–°é€»è¾‘
  - æ£€æµ‹æ•°æ®ç‰ˆæœ¬å·
  - ä½¿ç”¨ InsertMode.insertOrReplace

#### 1.4 æ•°æ®è®¿é—®å±‚ (DAO)
- [x] **P1-1.4.1** åˆ›å»º `IdiomDao` æ•°æ®è®¿é—®å¯¹è±¡
  - æ–‡ä»¶: `lib/features/idiom_game/data/dao/idiom_dao.dart`
  - æ–¹æ³•: `findByFirstPinyin()`, `findByFirstChar()`, `findByGrade()`, `getRandomIdiom()`, `canChain()`, `getChainableIdioms()`
- [x] **P1-1.4.2** åˆ›å»º `IdiomGameSettingsDao`
  - æ–‡ä»¶: `lib/features/idiom_game/data/dao/idiom_game_settings_dao.dart`
  - æ–¹æ³•: `getSettings()`, `upsertSettings()`, `resetToDefault()`
- [x] **P1-1.4.3** åˆ›å»º `IdiomGameRecordsDao`
  - æ–‡ä»¶: `lib/features/idiom_game/data/dao/idiom_game_records_dao.dart`
  - æ–¹æ³•: `saveRecord()`, `getHighScore()`, `getRecentRecords()`, `getStatistics()`
- [x] **P1-1.4.4** åˆ›å»º `IdiomGradeProgressDao`
  - æ–‡ä»¶: `lib/features/idiom_game/data/dao/idiom_grade_progress_dao.dart`
  - æ–¹æ³•: `getAllProgress()`, `getProgress()`, `updateProgress()`, `unlockNextGrade()`

---

### Phase 2: è¯­éŸ³è¯†åˆ«é›†æˆ âœ… å·²å®Œæˆ

#### 2.1 Vosk é›†æˆ
- [x] **P2-2.1.1** æ·»åŠ  `vosk_flutter` ä¾èµ–
  - æ–‡ä»¶: `pubspec.yaml`
  - æ³¨æ„: vosk_flutter åŒ…æš‚æ—¶ä¸å¯ç”¨ï¼Œä»£ç å·²é¢„ç•™æ¥å£
- [x] **P2-2.1.2** åˆ›å»º `VoskSpeechService` æœåŠ¡ç±»
  - æ–‡ä»¶: `lib/features/idiom_game/services/vosk_speech_service.dart`
  - åŠŸèƒ½: å°è£… Vosk åˆå§‹åŒ–ã€è¯†åˆ«ã€é‡Šæ”¾
- [x] **P2-2.1.3** å®ç°æ¨¡å‹åŠ è½½é€»è¾‘
  - ä»æœ¬åœ°å­˜å‚¨è·¯å¾„åŠ è½½æ¨¡å‹
  - å¤„ç†æ¨¡å‹ä¸å­˜åœ¨çš„æƒ…å†µ
- [x] **P2-2.1.4** å®ç°å®æ—¶è¯†åˆ«å›è°ƒ
  - `onPartialResult`: éƒ¨åˆ†è¯†åˆ«ç»“æœ
  - `onFinalResult`: æœ€ç»ˆè¯†åˆ«ç»“æœ
  - `onError`: é”™è¯¯å¤„ç†

#### 2.2 VAD (è¯­éŸ³æ´»åŠ¨æ£€æµ‹)
- [x] **P2-2.2.1** å®ç°é™éŸ³æ£€æµ‹é€»è¾‘
  - æ–‡ä»¶: `lib/features/idiom_game/services/vad_service.dart`
  - æ£€æµ‹è¿ç»­é™éŸ³æ—¶é•¿
  - é™éŸ³è¶…è¿‡é˜ˆå€¼è‡ªåŠ¨åœæ­¢å½•éŸ³
- [x] **P2-2.2.2** å®ç°è‡ªåŠ¨æˆªæ–­åŠŸèƒ½
  - ç”¨æˆ·è¯´å®Œåè‡ªåŠ¨æäº¤è¯†åˆ«ç»“æœ
  - æ— éœ€æ‰‹åŠ¨ç‚¹å‡»åœæ­¢æŒ‰é’®
- [x] **P2-2.2.3** é…ç½® VAD å‚æ•°
  - é™éŸ³é˜ˆå€¼ (é»˜è®¤ 1.5 ç§’)
  - æœ€å¤§å½•éŸ³æ—¶é•¿ (é»˜è®¤ 10 ç§’)

#### 2.3 éŸ³é¢‘æƒé™ç®¡ç†
- [x] **P2-2.3.1** æ·»åŠ  `permission_handler` ä¾èµ–
- [x] **P2-2.3.2** å®ç°éº¦å…‹é£æƒé™è¯·æ±‚
  - é¦–æ¬¡ä½¿ç”¨æ—¶è¯·æ±‚æƒé™
  - æƒé™è¢«æ‹’ç»æ—¶æ˜¾ç¤ºå¼•å¯¼
- [x] **P2-2.3.3** å¤„ç†æƒé™çŠ¶æ€å˜åŒ–
  - ç›‘å¬æƒé™çŠ¶æ€
  - æƒé™è¢«æ’¤é”€æ—¶æç¤ºç”¨æˆ·

#### 2.4 è¯†åˆ«ç»“æœå¤„ç†
- [x] **P2-2.4.1** åˆ›å»º `IdiomMatcher` åŒ¹é…å™¨
  - æ–‡ä»¶: `lib/features/idiom_game/services/idiom_matcher.dart`
  - åŠŸèƒ½: å°†è¯­éŸ³è¯†åˆ«æ–‡æœ¬åŒ¹é…åˆ°æˆè¯­
- [x] **P2-2.4.2** å®ç°æ¨¡ç³ŠåŒ¹é…ç®—æ³•
  - å¤„ç†è¯†åˆ«ä¸å‡†ç¡®çš„æƒ…å†µ
  - æ”¯æŒåŒéŸ³å­—å®¹é”™
- [x] **P2-2.4.3** å®ç°æ¥é¾™è§„åˆ™éªŒè¯
  - åŒéŸ³åŒ¹é… (åŸºç¡€é˜¶æ®µ)
  - åŒå­—åŒ¹é… (è¿›é˜¶/ä¸“å®¶é˜¶æ®µ)

---

### Phase 3: æ¸¸æˆç«æŠ€åœº UI (éƒ¨åˆ†å®Œæˆ - ä¸šåŠ¡é€»è¾‘å·²å®Œæˆ)

#### 3.1 é¡µé¢æ¡†æ¶
- [ ] **P3-3.1.1** åˆ›å»º `IdiomGameArenaScreen` ä¸»é¡µé¢
  - æ–‡ä»¶: `lib/features/idiom_game/presentation/screens/idiom_game_arena_screen.dart`
  - å¸ƒå±€: é¡¶éƒ¨AIåŒºåŸŸ + ä¸­éƒ¨æ¥é¾™é“¾ + åº•éƒ¨æ“ä½œåŒº
- [ ] **P3-3.1.2** åˆ›å»º `IdiomGameArenaController` æ§åˆ¶å™¨
  - æ–‡ä»¶: `lib/features/idiom_game/presentation/controllers/idiom_game_arena_controller.dart`
  - çŠ¶æ€ç®¡ç†: ä½¿ç”¨ GetX æˆ– Riverpod
- [x] **P3-3.1.3** å®ç°æ¸¸æˆçŠ¶æ€æœº
  - æ–‡ä»¶: `lib/features/idiom_game/models/game_state.dart`
  - çŠ¶æ€: idle, listening, processing, success, failed, timeout
  - çŠ¶æ€è½¬æ¢é€»è¾‘

#### 3.2 AI è™šæ‹Ÿå½¢è±¡
- [x] **P3-3.2.1** åˆ›å»º `AiOpponentService` æœåŠ¡
  - æ–‡ä»¶: `lib/features/idiom_game/services/ai_opponent_service.dart`
  - AI æ¥é¾™é€»è¾‘å’Œæ‹ŸäººåŒ–è¡Œä¸º
- [ ] **P3-3.2.2** åˆ›å»º `AiAvatarWidget` ç»„ä»¶ (UI)
  - æ–‡ä»¶: `lib/features/idiom_game/presentation/widgets/ai_avatar_widget.dart`
  - æ˜¾ç¤º AI å¤´åƒå’Œè¡¨æƒ…
- [ ] **P3-3.2.3** å®ç°è¡¨æƒ…åˆ‡æ¢åŠ¨ç”» (UI)
  - æ€è€ƒè¡¨æƒ… (ğŸ¤”)
  - è¢«éš¾ä½è¡¨æƒ… (ğŸ˜“)
  - æƒŠå–œè¡¨æƒ… (ğŸ¤©)
  - å¹³é™è¡¨æƒ… (ğŸ˜Š)
- [ ] **P3-3.2.4** å®ç°æ°”æ³¡å¯¹è¯æ¡† (UI)
  - æ˜¾ç¤º AI çš„è¯è¯­
  - æ”¯æŒæ‰“å­—æœºæ•ˆæœ

#### 3.3 æ¥é¾™é“¾å±•ç¤º (UI - å¾…å®ç°)
- [ ] **P3-3.3.1** åˆ›å»º `IdiomChainWidget` ç»„ä»¶
  - æ–‡ä»¶: `lib/features/idiom_game/presentation/widgets/idiom_chain_widget.dart`
  - æ°”æ³¡æµå¸ƒå±€å±•ç¤ºæ¥é¾™å†å²
- [ ] **P3-3.3.2** å®ç°å°¾å­—é«˜äº®æ•ˆæœ
  - å½“å‰éœ€è¦æ¥çš„å­—é«˜äº®æ˜¾ç¤º
  - ä½¿ç”¨ä¸åŒé¢œè‰²åŒºåˆ†
- [ ] **P3-3.3.3** å®ç°æ»šåŠ¨ä¸åŠ¨ç”»
  - æ–°æˆè¯­åŠ å…¥æ—¶è‡ªåŠ¨æ»šåŠ¨
  - æ·»åŠ å…¥åœºåŠ¨ç”»

#### 3.4 è¯­éŸ³æŒ‰é’® (FAB) (UI - å¾…å®ç°)
- [ ] **P3-3.4.1** åˆ›å»º `VoiceFabWidget` ç»„ä»¶
  - æ–‡ä»¶: `lib/features/idiom_game/presentation/widgets/voice_fab_widget.dart`
  - éº¦å…‹é£æŒ‰é’® + å€’è®¡æ—¶ç¯
- [ ] **P3-3.4.2** å®ç°å‘¼å¸å¾‹åŠ¨åŠ¨ç”»
  - å½•éŸ³æ—¶å›¾æ ‡ç¼©æ”¾åŠ¨ç”»
  - ä½¿ç”¨ `AnimationController`
- [ ] **P3-3.4.3** å®ç°ç¯å½¢å€’è®¡æ—¶è¿›åº¦
  - ç»¿è‰² -> é»„è‰² -> çº¢è‰²æ¸å˜
  - ä½¿ç”¨ `CustomPainter` ç»˜åˆ¶
- [ ] **P3-3.4.4** å®ç°çŠ¶æ€åˆ‡æ¢
  - ç©ºé—²æ€: é™æ€å›¾æ ‡
  - ç›‘å¬æ€: å‘¼å¸åŠ¨ç”» + å€’è®¡æ—¶
  - å¤„ç†æ€: Loading åŠ¨ç”»

#### 3.5 è¿å‡»ç‰¹æ•ˆ (UI - å¾…å®ç°)
- [ ] **P3-3.5.1** åˆ›å»º `ComboEffectWidget` ç»„ä»¶
  - æ–‡ä»¶: `lib/features/idiom_game/presentation/widgets/combo_effect_widget.dart`
  - è¿å‡»è®¡æ•°å™¨ + ç‰¹æ•ˆè§¦å‘
- [ ] **P3-3.5.2** å®ç°å½©å¸¦/ç«ç„°ç‰¹æ•ˆ
  - ä½¿ç”¨ `Lottie` æˆ–è‡ªå®šä¹‰åŠ¨ç”»
  - å±å¹•è¾¹ç¼˜è§¦å‘
- [ ] **P3-3.5.3** å®ç°è‰ºæœ¯å­—å¼¹å‡º
  - "æ€ç»´å¦‚ç”µï¼" ç­‰é¼“åŠ±æ–‡æ¡ˆ
  - ç¼©æ”¾ + æ·¡å‡ºåŠ¨ç”»

#### 3.6 éŸ³æ•ˆç³»ç»Ÿ
- [x] **P3-3.6.1** æ·»åŠ  `audioplayers` ä¾èµ–
- [x] **P3-3.6.2** åˆ›å»º `GameSoundService` æœåŠ¡
  - æ–‡ä»¶: `lib/features/idiom_game/services/game_sound_service.dart`
  - é¢„åŠ è½½éŸ³æ•ˆæ–‡ä»¶
- [ ] **P3-3.6.3** å‡†å¤‡éŸ³æ•ˆèµ„æº (èµ„æºæ–‡ä»¶å¾…æ·»åŠ )
  - æˆåŠŸéŸ³æ•ˆ (Ding)
  - å¤±è´¥éŸ³æ•ˆ (Oops)
  - è¿å‡»éŸ³æ•ˆ
  - å€’è®¡æ—¶è­¦å‘ŠéŸ³

---

### Phase 4: ç­‰çº§é€‰æ‹©åœ°å›¾ (UI - å¾…å®ç°)

#### 4.1 é¡µé¢æ¡†æ¶
- [ ] **P4-4.1.1** åˆ›å»º `GradeMapScreen` é¡µé¢
  - æ–‡ä»¶: `lib/features/idiom_game/presentation/screens/grade_map_screen.dart`
  - å‚ç›´æ»šåŠ¨çš„é—¯å…³åœ°å›¾
- [ ] **P4-4.1.2** åˆ›å»º `GradeMapController` æ§åˆ¶å™¨
  - ç®¡ç†å¹´çº§è§£é”çŠ¶æ€
  - ç®¡ç†æ˜Ÿçº§æ•°æ®

#### 4.2 å¹´çº§å¡ç‰‡
- [ ] **P4-4.2.1** åˆ›å»º `GradeCardWidget` ç»„ä»¶
  - æ–‡ä»¶: `lib/features/idiom_game/presentation/widgets/grade_card_widget.dart`
  - æ˜¾ç¤ºå¹´çº§ã€æ˜Ÿçº§ã€çŠ¶æ€
- [ ] **P4-4.2.2** å®ç°ä¸‰ç§çŠ¶æ€æ ·å¼
  - å·²è§£é”: äº®è‰² + æ˜Ÿçº§æ˜¾ç¤º
  - å½“å‰: è„‰å†²å…‰æ™•æ•ˆæœ
  - æœªè§£é”: ç°è‰² + é”å¤´å›¾æ ‡
- [ ] **P4-4.2.3** å®ç°è„‰å†²å…‰æ™•åŠ¨ç”»
  - ä½¿ç”¨ `AnimatedContainer` æˆ– `CustomPainter`
  - å¾ªç¯æ’­æ”¾

#### 4.3 èƒŒæ™¯çº¹ç†
- [ ] **P4-4.3.1** å‡†å¤‡ä¸‰å¥—èƒŒæ™¯çº¹ç†èµ„æº
  - 1-3å¹´çº§: å¡é€šäº‘æœµã€æ°”çƒ
  - 4-8å¹´çº§: ä¹¦æœ¬ã€ç¬”å¢¨
  - 9-12å¹´çº§: æ˜Ÿç©ºã€å¥–æ¯
- [ ] **P4-4.3.2** å®ç°èƒŒæ™¯åˆ‡æ¢é€»è¾‘
  - æ ¹æ®å½“å‰é€‰æ‹©çš„å¹´çº§åˆ‡æ¢èƒŒæ™¯
  - æ·»åŠ è¿‡æ¸¡åŠ¨ç”»

#### 4.4 è§£é”é€»è¾‘ âœ… ä¸šåŠ¡é€»è¾‘å·²å®Œæˆ
- [x] **P4-4.4.1** å®ç°å¹´çº§è§£é”è§„åˆ™
  - æ–‡ä»¶: `lib/features/idiom_game/services/grade_unlock_service.dart`
  - ä¸Šä¸€å¹´çº§è·å¾—è‡³å°‘1æ˜Ÿè§£é”ä¸‹ä¸€å¹´çº§
  - é¦–æ¬¡è¿›å…¥é»˜è®¤è§£é”1å¹´çº§
- [x] **P4-4.4.2** å®ç°æ˜Ÿçº§è®¡ç®—è§„åˆ™
  - æ ¹æ®æ¥é¾™é•¿åº¦è®¡ç®—æ˜Ÿçº§ (1-3æ˜Ÿ)
  - ä¿å­˜æœ€é«˜æ˜Ÿçº§è®°å½•
  - è®¡ç®—å¾—åˆ†å’Œå¥–åŠ±å€ç‡

---

### Phase 5: æç¤ºç³»ç»Ÿä¸æ˜Ÿæ˜Ÿè”åŠ¨ (éƒ¨åˆ†å®Œæˆ - ä¸šåŠ¡é€»è¾‘å·²å®Œæˆ)

#### 5.1 æç¤ºæœåŠ¡ âœ… å·²å®Œæˆ
- [x] **P5-5.1.1** åˆ›å»º `HintService` æœåŠ¡ç±»
  - æ–‡ä»¶: `lib/features/idiom_game/services/hint_service.dart`
  - ç®¡ç†æç¤ºæ¬¡æ•°å’Œæ‰£è´¹é€»è¾‘
- [x] **P5-5.1.2** å®ç°å…è´¹æç¤ºé€»è¾‘
  - æ ¹æ®å¹´çº§é˜¶æ®µè·å–å…è´¹æ¬¡æ•°
  - æ¸¸æˆå†…æ¶ˆè€—è®¡æ•°
- [x] **P5-5.1.3** å®ç°ä»˜è´¹æç¤ºé€»è¾‘
  - æ£€æŸ¥æ˜Ÿæ˜Ÿä½™é¢
  - æ‰£é™¤æ˜Ÿæ˜Ÿå¹¶ç»™å‡ºæç¤º

#### 5.2 æç¤º UI
- [ ] **P5-5.2.1** åˆ›å»º `HintButtonWidget` ç»„ä»¶
  - æ–‡ä»¶: `lib/features/idiom_game/presentation/widgets/hint_button_widget.dart`
  - æ˜¾ç¤ºå‰©ä½™å…è´¹æ¬¡æ•°æˆ–æ‰£è´¹é‡‘é¢
- [ ] **P5-5.2.2** å®ç°æ— æ‰“æ–­äº¤äº’
  - ç‚¹å‡»ç›´æ¥å‡ºè¯ï¼Œä¸å¼¹ç¡®è®¤æ¡†
  - æ‰£è´¹æ—¶æ˜¾ç¤ºé£˜å‡ºåŠ¨ç”»
- [ ] **P5-5.2.3** å®ç°æ‰£è´¹åŠ¨ç”»
  - "-2â­" é£˜å‡ºæ•ˆæœ
  - æ˜Ÿæ˜Ÿæ•°é‡æ›´æ–°åŠ¨ç”»

#### 5.3 æ˜Ÿæ˜Ÿç³»ç»Ÿé›†æˆ âœ… å·²å®Œæˆ
- [x] **P5-5.3.1** å¯¹æ¥ç°æœ‰æ˜Ÿæ˜Ÿç³»ç»Ÿ
  - æ–‡ä»¶: `lib/features/idiom_game/services/idiom_game_star_service.dart`
  - è¯»å–å½“å‰æ˜Ÿæ˜Ÿä½™é¢
  - è°ƒç”¨æ‰£é™¤æ˜Ÿæ˜Ÿæ¥å£
- [x] **P5-5.3.2** å®ç°å¥–åŠ±å‘æ”¾
  - æ¸¸æˆç»“æŸæ ¹æ®è¡¨ç°å‘æ”¾æ˜Ÿæ˜Ÿ
  - åº”ç”¨å¥–åŠ±å€ç‡

---

### Phase 6: ç»“ç®—ä¸å­¦ä¹ é¢æ¿

#### 6.1 æ¸¸æˆç»“ç®—é¡µ
- [ ] **P6-6.1.1** åˆ›å»º `GameResultScreen` é¡µé¢
  - æ–‡ä»¶: `lib/features/idiom_game/presentation/screens/game_result_screen.dart`
  - æ˜¾ç¤ºå¾—åˆ†ã€æ¥é¾™é•¿åº¦ã€è·å¾—æ˜Ÿæ˜Ÿ
- [ ] **P6-6.1.2** å®ç°ç»“ç®—åŠ¨ç”»
  - åˆ†æ•°æ»šåŠ¨åŠ¨ç”»
  - æ˜Ÿæ˜Ÿé£å…¥åŠ¨ç”»
  - æ˜Ÿçº§è¯„å®šåŠ¨ç”»
- [ ] **P6-6.1.3** å®ç°æ“ä½œæŒ‰é’®
  - å†æ¥ä¸€å±€
  - è¿”å›åœ°å›¾
  - æŸ¥çœ‹è¯¦æƒ…

#### 6.2 æˆè¯­è¯¦æƒ…é¢æ¿
- [ ] **P6-6.2.1** åˆ›å»º `IdiomDetailSheet` åº•éƒ¨å¼¹çª—
  - æ–‡ä»¶: `lib/features/idiom_game/presentation/widgets/idiom_detail_sheet.dart`
  - æ˜¾ç¤ºæ‹¼éŸ³ã€é‡Šä¹‰ã€å‡ºå¤„ã€ä¾‹å¥
- [ ] **P6-6.2.2** å®ç°å¤§å­—æ‹¼éŸ³æ˜¾ç¤º
  - æ‹¼éŸ³æ ‡æ³¨åœ¨æ±‰å­—ä¸Šæ–¹
  - æ”¯æŒå¤šéŸ³å­—æ˜¾ç¤º
- [ ] **P6-6.2.3** é›†æˆ TTS æœ—è¯»
  - æ·»åŠ æœ—è¯»æŒ‰é’®
  - è°ƒç”¨ç³»ç»Ÿ TTS æˆ–ç¬¬ä¸‰æ–¹æœåŠ¡

#### 6.3 æ¸¸æˆä¸­è½»é‡æç¤º
- [ ] **P6-6.3.1** åˆ›å»º `IdiomTooltip` ç»„ä»¶
  - æ–‡ä»¶: `lib/features/idiom_game/presentation/widgets/idiom_tooltip.dart`
  - ç‚¹å‡»æˆè¯­æ˜¾ç¤ºç®€ç•¥é‡Šä¹‰
- [ ] **P6-6.3.2** å®ç°æ°”æ³¡æ ·å¼
  - ä¸æ‰“æ–­æ¸¸æˆæµ
  - ç‚¹å‡»å…¶ä»–åŒºåŸŸè‡ªåŠ¨æ¶ˆå¤±

#### 6.4 TTS æœåŠ¡
- [ ] **P6-6.4.1** æ·»åŠ  `flutter_tts` ä¾èµ–
- [ ] **P6-6.4.2** åˆ›å»º `TtsService` æœåŠ¡ç±»
  - æ–‡ä»¶: `lib/features/idiom_game/services/tts_service.dart`
  - å°è£… TTS åˆå§‹åŒ–å’Œæœ—è¯»æ–¹æ³•
- [ ] **P6-6.4.3** é…ç½®ä¸­æ–‡è¯­éŸ³
  - è®¾ç½®è¯­è¨€ä¸ºä¸­æ–‡
  - è°ƒæ•´è¯­é€Ÿå’ŒéŸ³è°ƒ

---

### Phase 7: è”è°ƒä¸ä¼˜åŒ–

#### 7.1 åŠŸèƒ½è”è°ƒ
- [ ] **P7-7.1.1** å®Œæ•´æ¸¸æˆæµç¨‹æµ‹è¯•
  - ä»åœ°å›¾è¿›å…¥ -> æ¸¸æˆ -> ç»“ç®— -> è¿”å›
  - éªŒè¯æ•°æ®æŒä¹…åŒ–
- [ ] **P7-7.1.2** è¯­éŸ³è¯†åˆ«å‡†ç¡®ç‡æµ‹è¯•
  - æµ‹è¯•ä¸åŒå£éŸ³
  - æµ‹è¯•å™ªéŸ³ç¯å¢ƒ
- [ ] **P7-7.1.3** è¾¹ç•Œæƒ…å†µå¤„ç†
  - ç½‘ç»œä¸­æ–­
  - æƒé™è¢«æ‹’ç»
  - èµ„æºæœªä¸‹è½½

#### 7.2 æ€§èƒ½ä¼˜åŒ–
- [ ] **P7-7.2.1** æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
  - æ£€æŸ¥ç´¢å¼•ä½¿ç”¨æƒ…å†µ
  - ä¼˜åŒ–æ…¢æŸ¥è¯¢
- [ ] **P7-7.2.2** å†…å­˜ä¼˜åŒ–
  - æ£€æŸ¥å†…å­˜æ³„æ¼
  - ä¼˜åŒ–å¤§åˆ—è¡¨æ¸²æŸ“
- [ ] **P7-7.2.3** åŠ¨ç”»æ€§èƒ½ä¼˜åŒ–
  - æ£€æŸ¥å¸§ç‡
  - ä¼˜åŒ–å¤æ‚åŠ¨ç”»

#### 7.3 æƒ…ç»ªä»·å€¼æ‰“ç£¨
- [ ] **P7-7.3.1** AI å¯¹è¯æ–‡æ¡ˆä¼˜åŒ–
  - ä¸°å¯Œé¼“åŠ±è¯­å¥
  - å¤±è´¥æ—¶çš„å…³æ€€è¯­å¥
- [ ] **P7-7.3.2** åŠ¨ç”»ç»†èŠ‚è°ƒæ•´
  - è°ƒæ•´åŠ¨ç”»æ—¶é•¿å’Œæ›²çº¿
  - å¢åŠ å¾®äº¤äº’
- [ ] **P7-7.3.3** éŸ³æ•ˆè°ƒæ•´
  - è°ƒæ•´éŸ³é‡å¹³è¡¡
  - ç¡®ä¿éŸ³æ•ˆä¸åˆºè€³

#### 7.4 æµ‹è¯•ä¸å‘å¸ƒ
- [ ] **P7-7.4.1** ç¼–å†™å•å…ƒæµ‹è¯•
  - æµ‹è¯•æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
  - æµ‹è¯•æ•°æ®è®¿é—®å±‚
- [ ] **P7-7.4.2** ç¼–å†™é›†æˆæµ‹è¯•
  - æµ‹è¯•å®Œæ•´æ¸¸æˆæµç¨‹
  - æµ‹è¯•å¼‚å¸¸æƒ…å†µå¤„ç†
- [ ] **P7-7.4.3** å‘å¸ƒå‰æ£€æŸ¥
  - ä»£ç å®¡æŸ¥
  - æ€§èƒ½æµ‹è¯•
  - å…¼å®¹æ€§æµ‹è¯•

---

## ä¸ƒã€ä¾èµ–æ¸…å•

```yaml
dependencies:
  # è¯­éŸ³è¯†åˆ«
  vosk_flutter: ^0.4.0
  permission_handler: ^11.0.0

  # éŸ³é¢‘æ’­æ”¾
  audioplayers: ^5.0.0
  flutter_tts: ^3.8.0

  # ç½‘ç»œä¸‹è½½
  dio: ^5.0.0

  # åŠ¨ç”»
  lottie: ^2.7.0

  # å·²æœ‰ä¾èµ– (ç¡®è®¤ç‰ˆæœ¬å…¼å®¹)
  drift: ^2.x
  path_provider: ^2.x
```

---

## å…«ã€æ–‡ä»¶ç»“æ„ (å·²å®ç°éƒ¨åˆ†æ ‡è®° âœ…)

```
lib/features/idiom_game/
â”œâ”€â”€ data/
â”‚   â””â”€â”€ dao/
â”‚       â”œâ”€â”€ idiom_dao.dart âœ…
â”‚       â”œâ”€â”€ idiom_game_settings_dao.dart âœ…
â”‚       â”œâ”€â”€ idiom_game_records_dao.dart âœ…
â”‚       â””â”€â”€ idiom_grade_progress_dao.dart âœ…
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ resource_download_service.dart âœ…
â”‚   â”œâ”€â”€ idiom_data_importer.dart âœ…
â”‚   â”œâ”€â”€ vosk_speech_service.dart âœ… (å ä½å®ç°)
â”‚   â”œâ”€â”€ vad_service.dart âœ…
â”‚   â”œâ”€â”€ idiom_matcher.dart âœ…
â”‚   â”œâ”€â”€ ai_opponent_service.dart âœ…
â”‚   â”œâ”€â”€ hint_service.dart âœ…
â”‚   â”œâ”€â”€ game_sound_service.dart âœ…
â”‚   â”œâ”€â”€ tts_service.dart âœ…
â”‚   â”œâ”€â”€ grade_unlock_service.dart âœ… (æ–°å¢)
â”‚   â”œâ”€â”€ idiom_game_star_service.dart âœ… (æ–°å¢)
â”‚   â””â”€â”€ idiom_game_service.dart âœ… (æ–°å¢ - ä¸»æœåŠ¡)
â”œâ”€â”€ providers/
â”‚   â””â”€â”€ idiom_game_providers.dart âœ…
â”œâ”€â”€ models/
â”‚   â””â”€â”€ game_state.dart âœ…
â”œâ”€â”€ presentation/ (UI - å¾…å®ç°)
â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”œâ”€â”€ grade_map_screen.dart
â”‚   â”‚   â”œâ”€â”€ idiom_game_arena_screen.dart
â”‚   â”‚   â””â”€â”€ game_result_screen.dart
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”œâ”€â”€ grade_map_controller.dart
â”‚   â”‚   â””â”€â”€ idiom_game_arena_controller.dart
â”‚   â””â”€â”€ widgets/
â”‚       â”œâ”€â”€ ai_avatar_widget.dart
â”‚       â”œâ”€â”€ idiom_chain_widget.dart
â”‚       â”œâ”€â”€ voice_fab_widget.dart
â”‚       â”œâ”€â”€ combo_effect_widget.dart
â”‚       â”œâ”€â”€ grade_card_widget.dart
â”‚       â”œâ”€â”€ hint_button_widget.dart
â”‚       â”œâ”€â”€ idiom_detail_sheet.dart
â”‚       â””â”€â”€ idiom_tooltip.dart
```
