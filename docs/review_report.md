

  ---
ðŸ” Children Rewards é¡¹ç›®ç»¼åˆä»£ç å®¡æŸ¥æŠ¥å‘Š

é¡¹ç›®åç§°: children_rewards (æˆé•¿æ˜Ÿè½¨)
å®¡æŸ¥æ—¥æœŸ: 2025-12-29
Flutter ç‰ˆæœ¬: SDK >=3.4.3 <4.0.0
ä»£ç è§„æ¨¡: ~46,430 è¡Œ (å«ç”Ÿæˆæ–‡ä»¶), ~29,599 è¡Œ (ä¸å«ç”Ÿæˆæ–‡ä»¶)

  ---
ðŸ“Š æ‰§è¡Œæ‘˜è¦

| ç»´åº¦       | è¯„åˆ†   | çŠ¶æ€        |
  |------------|--------|-------------|
| ä»£ç è´¨é‡   | 6.5/10 | âš ï¸ éœ€æ”¹è¿›   |
| æž¶æž„è®¾è®¡   | 7/10   | âœ… è‰¯å¥½     |
| å®‰å…¨æ€§     | 5/10   | ðŸ”´ éœ€å…³æ³¨   |
| æ€§èƒ½       | 6/10   | âš ï¸ éœ€æ”¹è¿›   |
| æµ‹è¯•è¦†ç›–   | 2/10   | ðŸ”´ ä¸¥é‡ä¸è¶³ |
| æ–‡æ¡£å®Œæ•´æ€§ | 5/10   | âš ï¸ éœ€æ”¹è¿›   |

æ•´ä½“è¯„åˆ†: 5.9/10

  ---
ðŸ”´ Critical Issues (P0 - å¿…é¡»ç«‹å³ä¿®å¤)

1. æ•°æ®åº“æœªåŠ å¯† - å„¿ç«¥éšç§æ•°æ®æš´éœ²é£Žé™©

- ä½ç½®: lib/core/database/connection/native.dart
- é—®é¢˜: SQLite æ•°æ®åº“æ˜Žæ–‡å­˜å‚¨å„¿ç«¥å§“åã€ç”Ÿæ—¥ç­‰æ•æ„Ÿä¿¡æ¯
- å½±å“: éšç§åè®®å£°ç§°"åŠ å¯†å­˜å‚¨"ä¸Žå®žé™…ä¸ç¬¦ï¼Œå­˜åœ¨åˆè§„é£Žé™©
- ä¿®å¤: ä½¿ç”¨ sqlcipher_flutter_libs + encrypted_drift å®žçŽ°åŠ å¯†

2. æ•°æ®åº“å¯¼å…¥ç¼ºä¹éªŒè¯

- ä½ç½®: lib/core/services/database_backup_service.dart
- é—®é¢˜: å¯å¯¼å…¥ä»»æ„æ–‡ä»¶è¦†ç›–æ•°æ®åº“ï¼Œæ—  schema éªŒè¯
- å½±å“: æ¶æ„æ–‡ä»¶å¯å¯¼è‡´åº”ç”¨å´©æºƒæˆ–æ•°æ®æŸå
- ä¿®å¤: æ·»åŠ  SQLite æ ¼å¼éªŒè¯å’Œ schema ç‰ˆæœ¬æ£€æŸ¥

3. Timer æ¯ç§’è§¦å‘å…¨ç»„ä»¶é‡å»º

- ä½ç½®: lib/features/idiom_game/presentation/providers/idiom_game_provider.dart:338-346
- é—®é¢˜: å€’è®¡æ—¶æ¯ç§’æ›´æ–°æ•´ä¸ª IdiomGameStateï¼Œå¯¼è‡´æ¸¸æˆç•Œé¢å®Œå…¨é‡å»º
- å½±å“: é«˜ CPU å ç”¨ï¼Œå¯èƒ½å¯¼è‡´å¡é¡¿
- ä¿®å¤: å°† remainingTime æå–ä¸ºç‹¬ç«‹ Providerï¼Œä½¿ç”¨ select ç²¾ç¡®ç›‘å¬

4. æµ‹è¯•è¦†ç›–çŽ‡ä¸ºé›¶

- ä½ç½®: /test/ ç›®å½•ä¸ºç©º
- é—®é¢˜: æ— ä»»ä½•å•å…ƒæµ‹è¯•ã€Widget æµ‹è¯•æˆ–é›†æˆæµ‹è¯•
- å½±å“: ä»£ç è´¨é‡æ— æ³•ä¿è¯ï¼Œé‡æž„é£Žé™©é«˜
- ä¿®å¤: ä¼˜å…ˆä¸ºæ ¸å¿ƒä¸šåŠ¡é€»è¾‘æ·»åŠ å•å…ƒæµ‹è¯•

  ---
ðŸŸ  High Priority (P1 - ä¸‹æ¬¡å‘å¸ƒå‰ä¿®å¤)

ä»£ç è´¨é‡é—®é¢˜

| é—®é¢˜      | ä½ç½®                                        | æè¿°                                   |
  |-----------|---------------------------------------------|----------------------------------------|
| God Class | idiom_game_screen.dart (1499è¡Œ)             | å•æ–‡ä»¶æ‰¿è½½ UI+è¯­éŸ³+çŠ¶æ€+åŠ¨ç”»ï¼Œè¿å SRP |
| ä»£ç é‡å¤  | add_rule_screen.dart, edit_rule_screen.dart | _getIconData() ç­‰æ–¹æ³•å®Œå…¨é‡å¤          |
| é­”æ³•æ•°å­—  | å¤šå¤„                                        | ç¡¬ç¼–ç çš„ UI å°ºå¯¸å’Œä¸šåŠ¡å¸¸é‡             |

å®‰å…¨é—®é¢˜

| é—®é¢˜             | ä½ç½®                           | æè¿°                             |
  |------------------|--------------------------------|----------------------------------|
| è·¯å¾„éåŽ†é£Žé™©     | avatar_picker.dart             | æŽ¥å—ä»»æ„ç»å¯¹è·¯å¾„ï¼ŒæœªéªŒè¯æ²™ç®±è¾¹ç•Œ |
| ä¾èµ–ç‰ˆæœ¬æœªé”å®š   | pubspec.yaml                   | vosk_flutter ä»Ž git HEAD å¼•ç”¨    |
| ä¸‹è½½å®Œæ•´æ€§æœªéªŒè¯ | resource_download_service.dart | MD5 ä¸ºå ä½ç¬¦ï¼Œæœªå®žé™…éªŒè¯         |
| SQL æ³¨å…¥é£Žé™©     | app_database.dart:381-383      | æ—¥å¿—æŸ¥è¯¢ LIKE æœªè½¬ä¹‰ç‰¹æ®Šå­—ç¬¦     |

æ€§èƒ½é—®é¢˜

| é—®é¢˜           | ä½ç½®                             | æè¿°                                   |
  |----------------|----------------------------------|----------------------------------------|
| å¤šæ¬¡æ•°æ®åº“æŸ¥è¯¢ | idiom_dao.dart:366-502           | findNextIdioms å¯èƒ½æ‰§è¡Œ 3 æ¬¡æŸ¥è¯¢       |
| N+1 é—®é¢˜       | idiom_dao.dart:208-242           | å¤šéŸ³å­—å¾ªçŽ¯æŸ¥è¯¢                         |
| é‡å¤å®žä¾‹åŒ–     | idiom_game_service_impl.dart:101 | FuzzyIdiomMatcher æ¯æ¬¡è°ƒç”¨éƒ½åˆ›å»ºæ–°å®žä¾‹ |
| Timer æœªæ¸…ç†   | idiom_game_provider.dart         | dispose æœªå–æ¶ˆ Timerï¼Œå­˜åœ¨å†…å­˜æ³„æ¼é£Žé™© |

  ---
ðŸŸ¡ Medium Priority (P2 - è®¡åˆ’åˆ°ä¸‹ä¸ªè¿­ä»£)

ä»£ç è´¨é‡

- æå–å…¬å…± UI ç»„ä»¶ (IconPickerWidget, FormLabel ç­‰)
- ç»Ÿä¸€è¡¨å•å±å¹•åŸºç±»
- æ¸…ç†æœªä½¿ç”¨ä»£ç  (_VoiceInputButtonContent çº¦ 90 è¡Œ)
- ç»Ÿä¸€æ³¨é‡Šè¯­è¨€ï¼ˆä¸­è‹±æ–‡æ··æ‚ï¼‰

å®‰å…¨

- ç§»é™¤å¤šä½™è“ç‰™æƒé™
- ç¡¬ç¼–ç  URL æ”¹ä¸ºå¯é…ç½®

æ€§èƒ½

- mistake_book_screen.dart æ”¹ç”¨ ListView.builder
- _aiTurn ä¸²è¡Œ await æ”¹ä¸ºå¹¶è¡Œ

æ–‡æ¡£

- æ›´æ–° README.mdï¼ˆå½“å‰ä¸º Flutter é»˜è®¤æ¨¡æ¿ï¼‰
- æ·»åŠ  API æ–‡æ¡£å’Œæž¶æž„è¯´æ˜Ž

  ---
ðŸŸ¢ Low Priority (P3 - è·Ÿè¸ªåˆ° Backlog)

- å˜é‡å‘½åè§„èŒƒç»Ÿä¸€
- æå–ç¡¬ç¼–ç å­—ç¬¦ä¸²åˆ° l10n
- æ·»åŠ ä»£ç æ³¨é‡Š
- æ¸…ç† 3 ä¸ª TODO æ³¨é‡Š

  ---
âœ… æ­£é¢å‘çŽ°

æž¶æž„è®¾è®¡

- âœ… é‡‡ç”¨ Clean Architecture åˆ†å±‚ç»“æž„
- âœ… ä½¿ç”¨ Riverpod è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼Œä¾èµ–æ³¨å…¥æ¸…æ™°
- âœ… æ•°æ®åº“æ“ä½œä½¿ç”¨ Drift ORMï¼Œç±»åž‹å®‰å…¨
- âœ… å›½é™…åŒ–æ”¯æŒå®Œå–„ (l10n)
- âœ… é”™è¯¯å¤„ç†ä½¿ç”¨ Result ç±»åž‹

æ•°æ®åº“

- âœ… Idioms è¡¨ç´¢å¼•è®¾è®¡å®Œå–„ï¼ˆ6 ä¸ªç´¢å¼•ï¼‰
- âœ… æŸ¥è¯¢ä½¿ç”¨ limit é™åˆ¶ç»“æžœ
- âœ… è½¯åˆ é™¤æœºåˆ¶ (isDeleted æ ‡è®°)

å®‰å…¨

- âœ… ORM ä½¿ç”¨å¾—å½“ï¼Œå¤§éƒ¨åˆ†æŸ¥è¯¢ç±»åž‹å®‰å…¨
- âœ… idiom_dao.dart æ­£ç¡®å®žçŽ° LIKE è½¬ä¹‰
- âœ… æœ¬åœ°ä¼˜å…ˆæž¶æž„ï¼Œå‡å°‘ç½‘ç»œæ”»å‡»é¢
- âœ… iOS æƒé™è¯´æ˜Žå®Œæ•´

æ€§èƒ½

- âœ… åˆ—è¡¨æ¸²æŸ“å¤§éƒ¨åˆ†ä½¿ç”¨ ListView.builder
- âœ… Provider ä½¿ç”¨ autoDispose ç®¡ç†ç”Ÿå‘½å‘¨æœŸ
- âœ… èµ„æºæ¸…ç†ï¼ˆdisposeï¼‰åŸºæœ¬åˆ°ä½

  ---
ðŸ“‹ Flutter Analyze ç»“æžœ

flutter analyze å‘çŽ° 8 ä¸ªé—®é¢˜:
- 3 warnings (æœªä½¿ç”¨å˜é‡)
- 5 info (deprecated API ä½¿ç”¨)

ä¸»è¦é—®é¢˜ï¼š
- idiom_engagement_dao.dart:47 - æœªä½¿ç”¨å˜é‡ newLastWrongAt
- idiom_puzzle_provider.dart:145 - æœªä½¿ç”¨å˜é‡ includeRare
- puzzle_settings_screen.dart:24 - æœªä½¿ç”¨å­—æ®µ _settings
- å¤šå¤„ä½¿ç”¨å·²åºŸå¼ƒçš„ withOpacityï¼Œåº”æ”¹ç”¨ withValues()

  ---
ðŸ“ˆ æŠ€æœ¯å€ºåŠ¡ä¼°ç®—

| å€ºåŠ¡é¡¹                 | å½±å“èŒƒå›´ | ä¼°ç®—å·¥æ—¶ | ä¼˜å…ˆçº§ |
  |------------------------|----------|----------|--------|
| æ•°æ®åº“åŠ å¯†å®žçŽ°         | æ ¸å¿ƒå®‰å…¨ | 8h       | P0     |
| æ·»åŠ å•å…ƒæµ‹è¯•           | å…¨é¡¹ç›®   | 16h+     | P0     |
| Timer é‡å»ºä¼˜åŒ–         | æ¸¸æˆæ¨¡å— | 4h       | P0     |
| idiom_game_screen æ‹†åˆ† | 1 æ–‡ä»¶   | 8h       | P1     |
| ä»£ç é‡å¤æ¶ˆé™¤           | 4+ æ–‡ä»¶  | 4h       | P1     |
| æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–         | DAO å±‚   | 4h       | P1     |
| å®‰å…¨æ¼æ´žä¿®å¤           | å¤šå¤„     | 6h       | P1     |
| å›¾æ ‡æ˜ å°„é‡æž„           | 2 æ–‡ä»¶   | 2h       | P2     |
| æ–‡æ¡£æ›´æ–°               | å…¨é¡¹ç›®   | 4h       | P2     |

æ€»ä¼°ç®—: ~56+ å°æ—¶

  ---
ðŸŽ¯ å»ºè®®è¡ŒåŠ¨è®¡åˆ’

ç¬¬ä¸€é˜¶æ®µ (ç«‹å³)

1. å®žçŽ°æ•°æ®åº“åŠ å¯†
2. ä¿®å¤ Timer é‡å»ºé—®é¢˜
3. æ·»åŠ æ•°æ®åº“å¯¼å…¥éªŒè¯

ç¬¬äºŒé˜¶æ®µ (1-2 å‘¨)

1. ä¸ºæ ¸å¿ƒä¸šåŠ¡é€»è¾‘æ·»åŠ å•å…ƒæµ‹è¯•
2. æ‹†åˆ† idiom_game_screen.dart
3. ä¿®å¤å®‰å…¨æ¼æ´žï¼ˆè·¯å¾„éåŽ†ã€SQL æ³¨å…¥ï¼‰

ç¬¬ä¸‰é˜¶æ®µ (æŒç»­)

1. æ¶ˆé™¤ä»£ç é‡å¤
2. ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢
3. å®Œå–„æ–‡æ¡£

  ---

âº ç»¼åˆä»£ç å®¡æŸ¥å·²å®Œæˆï¼ä»¥ä¸‹æ˜¯å…³é”®å‘çŽ°æ‘˜è¦ï¼š

å®¡æŸ¥å®Œæˆæ€»ç»“

æ•´ä½“è¯„åˆ†: 5.9/10

ðŸ”´ æœ€ç´§æ€¥é—®é¢˜ (P0)

1. æ•°æ®åº“æœªåŠ å¯† - å„¿ç«¥éšç§æ•°æ®æ˜Žæ–‡å­˜å‚¨ï¼Œä¸Žéšç§åè®®å£°æ˜Žä¸ç¬¦
2. æµ‹è¯•è¦†ç›–çŽ‡ä¸ºé›¶ - /test/ ç›®å½•ä¸ºç©º
3. Timer æ€§èƒ½é—®é¢˜ - æ¯ç§’è§¦å‘æ•´ä¸ªæ¸¸æˆç•Œé¢é‡å»º
4. æ•°æ®åº“å¯¼å…¥æ— éªŒè¯ - å¯å¯¼å…¥ä»»æ„æ–‡ä»¶è¦†ç›–æ•°æ®åº“

ðŸŸ  é«˜ä¼˜å…ˆçº§é—®é¢˜ (P1)

- idiom_game_screen.dart 1499 è¡Œï¼Œéœ€è¦æ‹†åˆ†
- ä»£ç é‡å¤ä¸¥é‡ï¼ˆ_getIconData() ç­‰æ–¹æ³•åœ¨å¤šæ–‡ä»¶é‡å¤ï¼‰
- è·¯å¾„éåŽ†é£Žé™©ã€SQL æ³¨å…¥é£Žé™©
- æ•°æ®åº“æŸ¥è¯¢å¯ä¼˜åŒ–ï¼ˆN+1 é—®é¢˜ï¼‰

âœ… åšå¾—å¥½çš„æ–¹é¢

- Clean Architecture åˆ†å±‚ç»“æž„
- Riverpod çŠ¶æ€ç®¡ç†æž¶æž„åˆç†
- æ•°æ®åº“ç´¢å¼•è®¾è®¡å®Œå–„
- å›½é™…åŒ–æ”¯æŒå®Œå–„

ðŸ“Š æŠ€æœ¯å€ºåŠ¡ä¼°ç®—

çº¦ 56+ å°æ—¶ å·¥ä½œé‡

  ---
éœ€è¦æˆ‘é’ˆå¯¹æŸä¸ªå…·ä½“é—®é¢˜æä¾›æ›´è¯¦ç»†çš„åˆ†æžæˆ–ä¿®å¤æ–¹æ¡ˆå—ï¼Ÿä¾‹å¦‚ï¼š
- æ•°æ®åº“åŠ å¯†å®žçŽ°æ–¹æ¡ˆ
- idiom_game_screen.dart æ‹†åˆ†å»ºè®®
- å•å…ƒæµ‹è¯•ç­–ç•¥
- å®‰å…¨æ¼æ´žä¿®å¤æŒ‡å—